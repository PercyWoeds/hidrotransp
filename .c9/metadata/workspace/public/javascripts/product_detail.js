{"filter":false,"title":"product_detail.js","tooltip":"/public/javascripts/product_detail.js","undoManager":{"mark":10,"position":10,"stack":[[{"start":{"row":0,"column":0},"end":{"row":78,"column":3},"action":"insert","lines":["$(document).ready(function(){","","    $(document).on(\"shown.bs.modal\", \"#new-detail-modal\", function() {","","","    \tvar items_suggested = new Bloodhound({","    \t  datumTokenizer: Bloodhound.tokenizers.obj.whitespace(\"description\"),","    \t  queryTokenizer: Bloodhound.tokenizers.whitespace,","          prefetch: window.location.origin + '/items_suggestion',","    \t  remote: {","            url: window.location.origin + '/items_suggestion?query=%QUERY',","        \twildcard: '%QUERY'","    \t  }","    \t});","","    \t$('#sale_details_item').typeahead({","    \t\t  hint: true,","    \t\t  highlight: true,","    \t\t  minLength: 1","    \t},","    \t{","    \t  displayKey: 'description',","    \t  source: items_suggested,","          templates: {","            suggestion: function (item) {","                return '<p>' + item.description + '</p>';","            }","          }","    \t});","","        $('#sale_details_item').focus();","","    \t$('#sale_details_item').typeahead('val', $('#sale_details_item_description').val() );","","    \t$('#sale_details_item').on('typeahead:select', function(object, datum){","            $('#sale_details_item').val(datum.id);","            $('#sale_details_qty').focus();","            subtotal();","        });","","        $('#sale_details_item').on('typeahead:change', function(event, data){","            $('#sale_details_item').val(data);","        });","","        $('#sale_details_item').on('blur', function() {","        \tdata = $('#sale_details_item').val();","        \turl = '/validate_suggested_item';","        \t$.ajax({","        \t\turl: url,","        \t\tdata: { item_description: data },","        \t\tsuccess: function(res){","        \t\t\tif (res[\"0\"].valid == false){","        \t\t\t\t// Item no v√°lido","        \t\t\t\t$('#sale_details_item').css('border-color', 'red');","        \t\t\t}else{","        \t\t\t\t// Item correcto","                        $('#sale_details_item_id').val(res[\"0\"].id.toString());","                        $('#sale_details_price').val(res[\"0\"].price.toString());","        \t\t\t\t$('#sale_details_item').css('border-color', '#ccc');","                        subtotal();","        \t\t\t}","        \t\t}","        \t});","        });","","        function subtotal() {","            $('#sale_details_subtotal').val($('#sale_details_qty').val() * $('#sale_details_price').val());","        };","","        $('#sale_details_qty').blur(function(){","             subtotal();","        });","","        $('#sale_details_price').blur(function(){","             subtotal();","        });","","    });","});"],"id":1}],[{"start":{"row":78,"column":3},"end":{"row":79,"column":0},"action":"insert","lines":["",""],"id":2}],[{"start":{"row":79,"column":0},"end":{"row":80,"column":0},"action":"insert","lines":["",""],"id":3}],[{"start":{"row":30,"column":15},"end":{"row":30,"column":16},"action":"remove","lines":["e"],"id":4}],[{"start":{"row":30,"column":14},"end":{"row":30,"column":15},"action":"remove","lines":["l"],"id":5}],[{"start":{"row":30,"column":13},"end":{"row":30,"column":14},"action":"remove","lines":["a"],"id":6}],[{"start":{"row":30,"column":12},"end":{"row":30,"column":13},"action":"remove","lines":["s"],"id":7}],[{"start":{"row":30,"column":12},"end":{"row":30,"column":13},"action":"insert","lines":["s"],"id":8}],[{"start":{"row":30,"column":13},"end":{"row":30,"column":14},"action":"insert","lines":["a"],"id":9}],[{"start":{"row":30,"column":14},"end":{"row":30,"column":15},"action":"insert","lines":["l"],"id":10}],[{"start":{"row":30,"column":15},"end":{"row":30,"column":16},"action":"insert","lines":["e"],"id":11}]]},"ace":{"folds":[],"scrolltop":227.4375,"scrollleft":0,"selection":{"start":{"row":30,"column":40},"end":{"row":30,"column":40},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1530908354023,"hash":"5b3e2ac76b7d6859be8477929259cb537558c8c5"}